# # .github/workflows/django-tests.yml
# name: Django tests

# on:
#   push:
#     branches:
#       - main
#       - master
#   pull_request:

# jobs:
#   test:
#     runs-on: ubuntu-latest
#     services:
#       postgres:
#         image: postgres:15
#         env:
#           POSTGRES_USER: postgres
#           POSTGRES_DB: postgres
#           POSTGRES_PASSWORD: postgres
#         ports:
#           - 5432:5432
#         options: >-
#           --health-cmd "pg_isready -U postgres"
#           --health-interval 10s
#           --health-timeout 5s
#           --health-retries 5

#     steps:
#       - uses: actions/checkout@v4
#       - name: Set up Python
#         uses: actions/setup-python@v4
#         with:
#           python-version: "3.11"
#       - name: Install dependencies
#         run: |
#           python -m pip install --upgrade pip
#           pip install -r requirements.txt || pip install django djangorestframework djangorestframework-simplejwt drf-spectacular
#       - name: Run migrations
#         env:
#           DATABASE_URL: postgres://postgres:postgres@127.0.0.1:5432/postgres
#         run: |
#           python manage.py migrate --noinput
#       - name: Run tests
#         run: |
#           coverage run --source='.' manage.py test
#           coverage report -m
#       - name: Upload coverage report
#         uses: actions/upload-artifact@v4
#         with:
#           name: coverage-report
#           path: htmlcov
